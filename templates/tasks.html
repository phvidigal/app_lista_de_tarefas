<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Lista de Tarefas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Minhas Tarefas</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <ul>
              {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
        
        <form action="{{ url_for('add_task') }}" method="post">
            <input type="text" name="title" placeholder="Nova tarefa">
            <button type="submit">Adicionar</button>
        </form>

        <ul class="task-list">
        {% for task in tasks %}
            <li class="{{ 'done' if task.done else '' }}">
                <span>{{ task.title }}</span>
                <div class="task-buttons">
                    <form action="{{ url_for('toggle', id=task.id) }}" method="get">
                        <button type="submit">Concluir</button>
                    </form>
                    <form action="{{ url_for('edit', id=task.id) }}" method="get">
                        <button type="submit">Editar</button>
                    </form>
                    <form action="{{ url_for('delete', id=task.id) }}" method="get">
                        <button type="submit">Remover</button>
                    </form>
                </div>
            </li>
        {% endfor %}
        </ul>

        <form action="{{ url_for('logout') }}" method="get">
            <button type="submit">Sair</button>
        </form>
    </div>
</body>
</html>
